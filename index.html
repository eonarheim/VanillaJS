<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="description" content="VanillaJS: The Power of Native JavaScript">
		<meta name="author" content="Erik Onarheim">
		<link rel="stylesheet" type="text/css" href="css/presentation.css">
		<link rel="stylesheet" type="text/css" href="css/custom.css">
      <link rel="icon" type="image/x-icon" href="favicon.png" />
      <!-- 
         The philosophy of VanillaJS is to avoid using JavaScript libraries when native JavaScript can be used to achieve the same goal. JavaScript provides a wide range of capabilities that truly make it a first class language for application development.

         In this talk we will learn about:

         Writing fast native JavaScript
         When to use a library
         How to easily replicate jQuery in native JavaScript
         Leveraging the functional nature of JavaScript
         Patterns such as the "revealing prototype pattern"
         The future of JavaScript in EcmaScript6
         Come learn the magic you need to become a VanillaJS JavaScript developer!

         -->

	</head>

	<body class="impress-not-supported">

		<div id="impress">
			<div id="introduction" class="step slide" data-x="-1500" data-y="-1500">
			    <p><b>VanillaJS </b></p>
			    <p>The Power of Native JavaScript
			    
			    <br/>
			    <ul>
			    	<li>
                  <img src="images/winnerVanilla.jpg" class="right-image border" style="width: 505px;">
                  <div style="font-size: 10pt;float: right; vertical-align: top;">Courtesy http://www.flickr.com/photos/foonus/</div>
               </li>

			    	<li>Erik Onarheim - Software Developer</li>
			    	<li>@ErikOnarheim</li>
			    	<li>erikonarheim.com</li>
			    </ul>
				</p>
			</div>
			<div id="about" class="step slide" data-x="-1500" data-y="0">
				<p><b>About Me</b></p>
				<hr/>
				<ul>
					<li><img src="images/Me.png" class="right-float border"></li>
					<li class="space10">Software Developer</li>
					<li class="space10">Excalibur | <a href="http://excaliburjs.com">excaliburjs.com</a></li>
               <li class="space10">Video Game Enthusiast</li>
					<li class="space10">Artist</li>
					<li class="space10">Hacker</li>
				</ul>
			</div>
         <div id="vanilla-js" class="step slide" data-x="-1500" data-y="1500">
            <p><b>What is Vanilla JS?</b></p>
            <hr>

            <img src="images/js-big.png" class="border" style="width: 400px; margin: auto; display: block">
            <ul>
               <!-- <li class="space10">Not a library</li>
               <li class="space10">Embraces Native JS</li>
               <li class="space10">Vanilla is the new black</li>
               <li class="space10">Making educated choices</li> -->
            </ul>
         </div>
         

         <div id="library-decision" class="step slide" data-x="-1500" data-y="3000">
            <p><b>When should you use a library?</b></p>
            <hr>
            <ul>
               <li class="space10">Browser Landscape</li>
               <li class="space10">Quick Prototyping</li>
               <li class="space10">Is it Magic?</li>
               <li class="space10">Heavy MV* Client App</li>
               <li class="space10">Your library takes a dependency on another (bootstrap, backbone.js, ember.js, etc.)</li>
            </ul>

         </div>

         <div id="what-if" class="step" data-x="-1500" data-y="4500">
            <img src="images/you-dont-need-jquery.jpg" style="width:100%">
         </div>         
         <div id="jquery-free" class="step slide" data-x="-1500" data-y="6000">
            <p><b>Things you don't need jQuery for.</b></p>
            <hr>
            <img src="images/jquery.jpg" class="right-float border" style="width: 300px">
            <ul>
               <li class="space5">Selectors (CSS2 in IE8 only)</li>
               <li class="space5">Iteration</li>
               <li class="space5">Dom Manipulation</li>
               <li class="space5">Animation</li>
               <li class="space5">Ajax</li>
               <li class="space5">Dom Ready</li>
            </ul>
         </div>

         <div id="jquery-selectors" class="step slide" data-x="-3000" data-y="6000">
            <p><b>Native Selectors</b></p>
            <hr>
            <!-- prefixed matches polyfill -->
            <div id="selectors-editor" class="code-editor">/// basic selectors
var $el = $('#my-id');
var el = document.getElementById('my-id');

var $divs = $('.div');
var divs = document.getElementsByTagName('div');

var $classes = $('.my-class');
// ie 9 and greater
var classes = document.getElementsByClassName('my-class');
// implement shim
if(!Element.prototype.getElementsByClassName){
    Element.prototype.getElementsByClassName = function(classname){
        var name = "."+classname;
        if(Element.prototype.querySelectorAll){
            return this.querySelectorAll(name);
        }else{
            elements = this.getElementsByTagName("*");
            var results = [];
            for(var i = 0; i < elements.length; i++){
                if(elements[i].className === name){
                    results.push(elements[i]);
                }
            }
            return results;
        }
        
    };
}

var $elementSet = $('div.my-class');
var elementSet = document.querySelectorAll('div.my-class');

var $firstElement = $('div.my-class');
var firstElement = document.querySelector('div.my-class');
</div>
            <button id="btn-selectors" class="btn btn-primary right">Run!</button>
         </div>

         <div id="jquery-iteration" class="step slide" data-x="-4500" data-y="6000">
            <p><b>Native Iteration</b></p>
            <hr>
            <!-- .forEach -->
            <div id="iteration-editor" class="code-editor">
var jqElements = [];
$.each([1,2,3,4], function(i, element){
    jqElements.push(element);
});

var nativeElements = [];
[1,2,3,4].forEach(function(element, i){
    nativeElements.push(element);
});

var jqResult = $.map([1,2,3,4,5], function(i, element){
   return element * 2; 
});

var nativeResult = [1,2,3,4,5].map(function(element, i){
   return element * 2; 
});

// show es5
if(!Array.prototype.forEach){
    Array.prototype.forEach = function(fcn){
        var array = this;
        var length = array.length;
        for(var i = 0; i < length; i++){
            fcn.call(this, array[i], i);
        }        
    };
}

if(!Array.prototype.map){
    Array.prototype.map = function(fcn){
        var array = this;
        var length = array.length;
        var results = new Array(length);
        for(var i = 0; i < length; i++){
            results[i] = fcn.call(this, this[i], i);
        }
    };
}

</div>
            <button id="btn-interation" class="btn btn-primary right">Run!</button>
         </div>

         <div id="jquery-dom" class="step slide" data-x="-6000" data-y="6000">
            <p><b>Native Dom Manipulation</b></p>
            <hr>
            <!-- implement .text() -->
            <div id="dom-editor" class="code-editor">var newDiv = document.createElement('div');
newDiv.id = 'my-div';
newDiv.style.color = 'lime';
document.body.appendChild(newDiv);

var maybeNewDiv = document.getElementById('my-div');

if(newDiv === maybeNewDiv){
    writter.info("Works!");
}</div>
            <button id="btn-dom" class="btn btn-primary right">Run!</button>
         </div>

         <div id="jquery-animation" class="step slide" data-x="-7500" data-y="6000">
            <p><b>Native Animation</b></p>
            <hr>
            <img id="angry-baby" src="images/anger.jpg"/>
            <!-- todo implement fade -->
            <div id="animation-editor" class="half-code-editor">if(!window.requestAnimationFrame){
    window.requestAnimationFrame = 
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    function(callback){window.setTimeout(callback, 1000/60)};
}

var fadeOut = function(id, time){
    var el = document.getElementById(id);
    el.style.opacity = 1.0;
    var rate = el.style.opacity/time;
    var now = Date.now();
    var lastTime = Date.now();
    var delta;
    window.requestAnimationFrame(function fade(){
        now = Date.now();
        delta = now - lastTime;
        if(el.style.opacity >= 0){
            window.requestAnimationFrame(fade);    
        }
        el.style.opacity -= rate*delta;
        lastTime = now;
    });
};</div>
            <button id="btn-animation" class="btn btn-primary right">Run!</button>
         </div>
         <div id="jquery-ajax" class="step slide" data-x="-9000" data-y="6000" >
            <p><b>Native Ajax</b></p>
            <hr>

            <!-- todo implement xhr to twitter -->
            <div id="ajax-editor" class="code-editor">var request = new XMLHttpRequest();
request.responseType = 'json';
request.open('GET', 'www.example.com/myapi', true);
request.onload = function(){
    writter.info("Data!", request.response);   
}
request.send();
</div>
            <button id="btn-ajax" class="btn btn-primary right">Run!</button>
         </div>

         <div id="jquery-dom-ready" class="code-editor" data-x="-10500" data-y="6000" >
            <p><b>Native DOM Ready</b></p>
            <hr>

            <!-- todo implement dom ready -->
            <div id="dom-ready-editor" class="code-editor">
            </div>
         </div>


         <div id="the-jquery-question" class="step" data-rotate="-180" data-x="-10500" data-y="7500">
            <p style="width: 900px;font-size: 100px;margin: auto;color:rgb(213, 213, 213);"><b>So we shouldn't use jQuery right?</b></p>
         </div>
         <div id="one-does-not-simply" class="step" data-x="-1500" data-y="9000">
            <img src="images/one-does-not-simply.jpg" style="width:100%">
         </div>

         <div id="javascript-language" class="step slide" data-x="0" data-y="9000">
            <p><b>JavaScript as a Language</b></p>
            <hr>
            <ul>
               <li class="space10">Functional</li>
               <li class="space10">Object Oriented</li>
               <li class="space10">Prototypal</li>
               <li class="space10">Extensible</li>
               <li class="space10">Universal</li>
            </ul>

         </div>
         <div id="5-stages-of-javascript" class="step slide" data-x="0" data-y="7500">
            <p><b>5 Stages of Learning JavaScript</b></p>
            <hr>            
            <img src="images/5-stages.svg" class="right-float border" style="width: 240px">
            <ul>
               <li class="space10">Anger</li>
               <li class="space10">Denial</li>
               <li class="space10">Enlightenment</li>
               <li class="space10">Zealotry</li>
               <li class="space10">Zen</li>
            </ul>
         </div>
         
         <div id="javascript-patterns-modules" class="step slide" data-x="0" data-y="4500">
            <p><b>Wielding JavaScript: Modules (Namespaces)</b></p>
            <hr>
            <div id="modules-editor" class="code-editor">
var pollutingTheGlobal = 10;
// encapsulate GeneralMills functionality
var GeneralMills;
(function(GeneralMills){
    
    GeneralMills.myVarsDontPollute = 11;
    
    GeneralMills.theBestFunction = function(a, b){
        return a + b;
    };

})(GeneralMills || (GeneralMills = {}));


alert(myVarsDontPollute);
alert(GeneralMills.myVarsDontPollute);</div>
            <button id="btn-modules" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-revealing-module" class="step slide" data-x="0" data-y="3000">
            <p><b>Wielding JavaScript: Revealing Module Pattern</b></p>
            <hr>
            <div id="revealing-module-editor" class="code-editor">var Car = function(color){
    var car = {};
    car.color = color || "red";
    car.speed = 0;
    car.accelerate = function(speed){
        this.speed += speed;  
    };
    
    car.paint = function(color){
        this.color = color;
    };
    return car;
};</div>
            <button id="btn-revealing-module" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-prototype-pattern" class="step slide" data-x="0" data-y="1500">
            <p><b>Wielding JavaScript: Prototype Pattern</b></p>
            <hr>
            <div id="prototype-editor" class="code-editor">var Car = function(color){
    this.color = color || "red";
    this.speed = 0;
};

Car.prototype.accelerate = function(speed){
    this.speed += speed;
};

Car.prototype.paint = function(color){
    this.color = color;  
};
</div>
            <button id="btn-prototype" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-revealing-prototype-pattern" class="step slide" data-x="0" data-y="0">
            <p><b>Wielding JavaScript: Revealing Prototype Pattern</b></p>
            <hr>
            <div id="revealing-prototype-editor" class="code-editor">var Car = function(color){
    this.speed = 0;
    this.color = color || "red";
};

Car.prototype = (function(){
  var me = this;
  var increaseSpeed = function(speed){
      me.speed += speed;
  };
  
  me.accelerate = function(speed){
      me.increaseSpeed(speed);
  };
  
  me.paint = function(color){
      this.color = color;
  }; 
  
  return me;    
})();</div>
            <button id="btn-revealing-prototype" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-singleton" class="step slide" data-x="0" data-y="-1500">
            <p><b>Wielding JavaScript: Singleton</b></p>
            <hr>
            <div id="singleton-editor" class="code-editor">var Logger = function(){    
    if(!Logger._instance){
        Logger._instance = this;
    }
    return Logger._instance;
};
// static property and method
Logger._instance = null;
Logger.getInstance = function(){
    return new Logger();
};

Logger.prototype.info = function(){
    console.log.apply(console, Array.prototype.slice.call(arguments));
};</div>
            <button id="btn-singleton" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-observer" class="step slide" data-x="0" data-y="-3000">
            <p><b>Wielding JavaScript: Observer</b></p>
            <hr>
            <div id="observer-editor" class="code-editor"></div>
            <button id="btn-observer" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-pubsub" class="step slide" data-x="0" data-y="-4500">
            <p><b>Wielding JavaScript: Publish/Subscribe</b></p>
            <hr>
            <div id="pubsub-editor" class="code-editor"></div>
            <button id="btn-pubsub" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-inheritance" class="step slide" data-x="0" data-y="-6000">
            <p><b>Wielding JavaScript: "Classical" Inheritance</b></p>
            <hr>
            <div id="inheritance-editor" class="code-editor">var Class = function(){};

Class.extend = function(props){
   var _super = this.prototype;
   var SubClass = function(){
      if(this.init){
         this.init.apply(this, Array.prototype.slice.call(arguments));
      }
   };       
    
   // Create our super class and populate
   var SuperClass = new this();    
   for(var prop in props){
      SuperClass[prop] = props[prop];
   } 

   SubClass.prototype.constructor = SubClass;
   SubClass.prototype = SuperClass;
   SubClass.prototype._super = SuperClass;
   SubClass.extend = Class.extend;
    
   return SubClass;
};</div>
            <button id="btn-inheritance" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-interfaces" class="step slide" data-x="0" data-y="-7500">
            <p><b>Wielding JavaScript: Enforcing Interfaces</b></p>
            <hr>
            <div id="interfaces-editor" class="code-editor">Class.implements = function(methods){
   for(var i = 0; i < methods.length; i++){
      var method = methods[i];
      if(!this.prototype[method] || typeof this.prototype[method] !== "function"){
         throw new Error("Object does not implement " + method);
      }
   }
   return true;
};</div>
            <button id="btn-interfaces" class="btn btn-primary right">Run!</button>
         </div>

         <div id="javascript-patterns-decorator" class="step slide" data-x="0" data-y="-9000">
            <p><b>Wielding JavaScript: Decorator Pattern</b></p>
            <hr>
            <div id="decorator-editor" class="code-editor"></div>
            <button id="btn-decorator" class="btn btn-primary right">Run!</button>
         </div>

         <div id="es5-you-may-not-know" class="step slide" data-x="1500" data-y="-1500">
            <p><b>EcmaScript 5 That's awesome</b></p>
            <hr>
            <ul>
               <li class="space5">WebGl</li>
               <li class="space5">Canvas</li>
               <li class="space5">WebAudio Api</li>
               <li class="space5">WebSockets</li>
               <li class="space5">IndexDB</li>
               <li class="space5">FileSystem</li>
            </ul>
         </div>
         <div id="es6-today" class="step slide" data-x="1500" data-y="-3000">
            <p><b>EcmaScript 6 Today</b></p>
            <hr> 
            <ul>
               <li class="space5">De-structuring</li>
               <li class="space5">Object.observe</li>
               <li class="space5">Generators</li>
               <li class="space5">Native promises (Promises/A+ spec)</li>
               <li class="space5">Native module support</li>
               <li class="space5">Chrome Harmony Build (Experimental JavaScript flag)</li>
               <li class="space5">Tracuer Compiler</li>
            </ul>

         </div>

         <div id="eriks-observable" class="step slide" data-x="1500" data-y="-4500">
            <p><b>Observable Implementation</b></p>
            <hr> 
         </div>

			<div id="questions" class="step" data-x="3000" data-y="-4500">
				<h5 style="width: 440px;font-size: 1000px;margin: auto;color:rgb(213, 213, 213);">?</h5>
			</div>
		</div>

		<div class="hint">
			<p>Use the "Page Up" and "Page Down" keys to navigate.
		</div>
      <div id="toast-container"></div>
		<script type="text/javascript" src="lib/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="lib/impress.js"></script>
		<script type="text/javascript">impress().init()</script>
		<script type="text/javascript" src="lib/ace/ace.js" charset="utf-8"></script>
		<script type="text/javascript" src="snake.js"></script>
		<script type="text/javascript">
            if(!window.requestAnimationFrame){
                window.requestAnimationFrame = 
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                window.msRequestAnimationFrame ||
                window.oRequestAnimationFrame ||
                function(callback){window.setTimeout(callback, 1000/60)};
            }

            // implement jquery fadeOut

            var fadeOut = function(el, time){
               //var el = document.getElementById(id);
               var rate = el.style.opacity/time;
               var now = Date.now();
               var lastTime = Date.now();
               var delta;
               window.requestAnimationFrame(function fade(){
                  if(!el || !el.parentElement) return;

                  now = Date.now();
                  delta = now - lastTime;
                  if(el.style.opacity >= 0){
                     window.requestAnimationFrame(fade);    
                     el.style.opacity -= rate*delta;
                     lastTime = now;
                  }else{
                     el.parentElement.removeChild(el);
                  }
                    
                });
            };

            var Writter = function(){
               if(!Writter.instance){
                  Writter.instance = this;
                  this.toasts = [];
                  this.container = document.getElementById('toast-container');
               }

               return Writter.instance;
            };

            Writter.instance = null;
            Writter.getInstance = function(){
               return new Writter();
            };

            Writter.prototype = (function(){
               var fadeOut = function(el, time){
                  //var el = document.getElementById(id);
                  var rate = el.style.opacity/time;
                  var now = Date.now();
                  var lastTime = Date.now();
                  var delta;
                  window.requestAnimationFrame(function fade(){
                     if(!el || !el.parentElement) return;

                     now = Date.now();
                     delta = now - lastTime;
                     if(el.style.opacity >= 0){
                        window.requestAnimationFrame(fade);    
                        el.style.opacity -= rate*delta;
                        lastTime = now;
                     }else{
                        el.parentElement.removeChild(el);
                     }
                       
                  });
               };

               var message = function(level){
                  var args = Array.prototype.slice.call(arguments);
                  var message = args.join(' ');
                  var toast = document.createElement('div');
                  toast.className = 'toast '+ level;
                  toast.style.opacity = .7;
                  toast.innerText = message;
                  this.toasts.push(toast);

                  var firstEl = this.container.firstChild;
                  this.container.insertBefore(toast, firstEl);
                  setTimeout(function(){
                     fadeOut(toast, 3000);
                  },1000);
               }

               var info = function(){
                  message.call(this, 'info');
               }
               var warn = function(){
                  message.call(this, 'warn');
               }
               var error = function(){
                  message.call(this, 'error');
               }              

               var clear = function(){
                  var that = this;
                  this.toasts.forEach(function(t){
                     that.container.removeChild(t);
                  });
                  this.toasts.length = 0;
               }

               return {
                  info : info,
                  warn : warn,
                  error : error,
                  clear: clear
               }
            })();

				var scriptHoister =function(scriptText){
					setTimeout(function(){
			            if (scriptText) {
			                var head = document.getElementsByTagName("head")[0] || document.documentElement,
			                    script = document.createElement("script");
			                script.type = "text/javascript";
			                script.text = scriptText;
			                head.appendChild(script);
			                head.removeChild(script);
			            }
		            },10);
				};

				var makeEditor = function(id, removeCode){
					var editor = ace.edit(id);
					if(removeCode){
						editor.getSession().setValue('');
					}

					editor.setShowPrintMargin(false);
					editor.setTheme("ace/theme/monokai");
				    editor.getSession().setMode("ace/mode/javascript");
				    editor.getSession().setTabSize(4);
				    editor.getSession().setUseSoftTabs(true);
				    editor.getSession().setUseWorker(true);

				    editor.commands.addCommand({
					    name: 'Save',
					    bindKey: {win: 'Ctrl-S',  mac: 'Command-S'},
					    exec: function(editor) {
					        //...
					    },
					    readOnly: true // false if this command should not apply in readOnly mode
					});
					editor.setFontSize(20);
					return editor;
				};

				var hideDemoCode = true;

            var selectorsEditor = makeEditor('selectors-editor');
            var iterationEditor = makeEditor('iteration-editor');
            var domEditor = makeEditor('dom-editor');
            var ajaxEditor = makeEditor('ajax-editor');
            var animationEditor = makeEditor('animation-editor');
				
				var modulesEditor = makeEditor('modules-editor');
				var revealingModuleEditor = makeEditor('revealing-module-editor');
            var prototypeEditor = makeEditor('prototype-editor');
				var revealingPrototypeEditor = makeEditor('revealing-prototype-editor');
            var singletonEditor = makeEditor('singleton-editor');
            var observerEditor = makeEditor('observer-editor');
            var pubsubEditor = makeEditor('pubsub-editor');
            var inheritanceEditor = makeEditor('inheritance-editor');
            var interfacesEditor = makeEditor('interfaces-editor');
            var decoratorEditor = makeEditor('decorator-editor');


				// Setup coding demos
				$('#btn-animation').on('click', function(){
					var code = animationEditor.getSession().getValue();
					scriptHoister(code);
				});

				$('#btn-interation').on('click', function(){
					var code = iterationEditor.getSession().getValue();
					scriptHoister(code);
				});

				$('#btn-dom').on('click', function(){
					var code = domEditor.getSession().getValue();
					scriptHoister(code);
				});

				$('#btn-selectors').on('click', function(){
					var code = selectorsEditor.getSession().getValue();
					scriptHoister(code);
				});

				$('#btn-prototype').on('click', function(){
					clearAnimation();
					var code = prototypeEditor.getSession().getValue();
					scriptHoister(code);
				});

            $('#btn-singleton').on('click', function(){
               clearAnimation();
               var code = singletonEditor.getSession().getValue();
               scriptHoister(code);
            });
		</script>
	</body>
</html>